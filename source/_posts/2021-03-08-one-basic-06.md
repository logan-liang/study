---
title: 字符串
tags:
  - 基本结构和基本数据类型
categories:
  - Golang
comments: true
date: 2021-03-08 18:14:59
---


## 简述

字符串是UTF-8字符的一个序列（当字符为 ASCII 码时则占用 1 个字节，其它字符根据需要占用 2-4 个字节）。UTF-8是被广泛使用的编码格式，是文本文件的标准编码，其它包括XML和JSON在内，也都使用该编码。由于该编码对占用字节长度的不定性，Go中的字符串里的字符也可能根据需要占用1至4字节。Go这样做的好处是不仅减少了内存和硬盘空间占用，同时也不用像其它语言那样需要对使用UTF-8字符集的文本进行编码和解码。

字符串是一种值类型，且值不可变，即创建某个文本后你无法再次修改这个文本的内容；更深入的讲，字符串是字节的定长数组。

Go支持以下2种形式的字面值：

1. 解释字符串：
该类字符串使用双引号扩起来，其中的相关的转义字符将被替换，这些转义字符包括：
    - `\n`：换行符
    - `\r`：回车符
    - `\t`：tab 键
    - `\u`：Unicode 字符
    - `\\`：反斜杠自身

2. 非解释字符串：
该类字符串使用反引号扩起来，支持换行，例如：
```
     `This is a raw string \n` 中的 `\n\` 会被原样输出。
```

Go中的字符串是根据长度限定，而非特殊字符`\0`。

`string`类型的零值位长度为零的字符串，即空字符串`""`。

你可以通过函数 len() 来获取字符串所占的字节长度，例如：len(str)。

字符串的内容（纯字节）可以通过标准索引法来获取，在中括号`[]`内写入索引，索引从0开始计数：

- 字符串str的第一个字节：`str[0]`
- 第i个字节：`str[i-1]`
- 最后1个字节：`str[len(str)-1]`

需要注意的是，这种转换方案只针对纯ASCII码的字符串有效。

### 字符串拼接符 `+`

两个字符串`s1`和`s2`可以通过 `s:=s1+s2`拼接在一起。

`s2`追加在`s1`尾部并生成一个新的字符串`s`。

在循环中使用`+`拼接字符并不是最高效的做法，更好的办法是使用函数`strings.Join()`,有没有更好的办法了？有！使用字节缓冲（bytes.Buffer）拼接更加给力。
