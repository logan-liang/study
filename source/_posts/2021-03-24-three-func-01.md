---
title: 函数参数与返回值
tags:
  - 函数
categories:
  - Golang
comments: true
date: 2021-03-24 13:56:16
---


函数能够接收参数供自己使用，也可以返回零个或多个值。

我们通过`return`关键字返回一组值。事实上，任何一个有返回值的函数都必须以`return`或`panic`结尾。

在函数块里面，`return`之后的语句都不会执行。如果一个函数需要返回值，那么这个函数里面的每一个代码分支都要`return`语句。

### 按值传递（call by value）按引用传递（call by reference）

在任何情况下，传递指针（一个32位或者64位的值）的消耗都比传递副本来的少。

在函数调用时，像切片、字典、接口、通道这样的引用类型都是默认使用引用传递。

有些函数只是完成一个任务，并没有返回值。但是绝大部分的函数还是带有返回值的。

如果一个函数需要返回四到五个值，我们可以传递一个切片给函数或者传递一个结构体。因为传递一个指针允许直接修改变量的值，消耗更少。

```
(A) func DoSomething(a *A) {
        b = a
    }

(B) func DoSomething(a A) {
        b = &a
    }
```

### 命名的返回值（name return variables）

```
func getX2AndX3_2(input int) (x2 int, x3 int) {
    x2 = 2 * input
    x3 = 3 * input
    // return x2, x3
    return
}
```

尽量使用命名返回值：会使代码更清晰、更简短，同时更加容易读懂。

### 改变外部变量（outside variable）

传递指针给函数不但可以节省内存，而且赋予了函数直接修改外部变量的能力，所以被修改的变量不再需要使用`return`返回。

```
// this function changes reply:
func Multiply(a, b int, reply *int) {
    *reply = a * b
}

func main() {
    n := 0
    reply := &n
    Multiply(10, 5, reply)
    fmt.Println("Multiply:", *reply) // Multiply: 50
}
```
这仅仅是个指导性的例子，当需要在函数内改变一个占用内存比较大的变量时，性能优势就更加明显了。然而，如果不小心使用的话，传递一个指针很容易引发一些不确定的事，所以，我们要十分小心那些可以改变外部变量的函数，在必要时，需要添加注释以便其他人能够更加清楚的知道函数里面到底发生了什么