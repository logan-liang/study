---
title: Git Rebase
tags:
  - Rebase
categories:
  - Git
comments: true
date: 2022-07-05 17:26:30
---


### merge回顾

整合分支最容易的方法是merge命令。它会把两个分支的最新快照（C3和C4）以及二者最近的共同祖先（C2）进行三方合并，合并的结果是生成一个新的快照并提交。

### rebase介绍

如上，你可以提取在C4中引入的补丁和修改，然后在C3的基础上应用一次。这种操作叫做变基（rebase）。你可以使用rebase命令将提交到某一分支上的所有修改都移至另一分支上，就好像”重新播放一样“。


```
$ git checkout experiment
$ git rebase master
```
首先找到这两个分支（当前分支experiment， 变基操作的目标分支master）的最近共同祖先C2，然后对比当前分支相对于该祖先的历次提交，提取相应的修改并存为临时文件，然后将当前分支指向目标基底C3，最后一次将之前另存为临时文件的修改依序应用。

#### 命令

##### `git rebase -i [startpoint] [endpoint]`  合并多个commit为一个完整的commit

* `-i`： 代表弹出交互式的界面让用户编辑完成合并操作
* `[startpoint]` ：指定开始编辑区间
* `[endpoint]` ：指定结束编辑区间，若不指定，默认指向的commit


* pick：保留该commit（缩写:p）
* reword：保留该commit，但我需要修改该commit的注释（缩写:r）
* edit：保留该commit, 但我要停下来修改该提交(不仅仅修改注释)（缩写:e）
* squash：将该commit和前一个commit合并（缩写:s）
* fixup：将该commit和前一个commit合并，但我不要保留该提交的注释信息（缩写:f）
* exec：执行shell命令（缩写:x）
* drop：我要丢弃该commit（缩写:d）


##### `git rebase [startpoint] [endpoint] --onto [branchName]` 将某一段commit粘贴到另一个分支上
* `[startpoint]` ：指定开始编辑区间
* `[endpoint]` ：指定结束编辑区间，若不指定，默认指向的commit
* `[branchName]` : 目标分支


##### `git rebase --onto master feature patch` 不合并其他分支，并发布

* master：发布至目标
* feature：忽略目标
* patch：要合并目标

#####`git pull --rebase` 通过rebase执行git pull


